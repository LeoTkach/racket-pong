
> @table-tennis/backend@0.1.0 server
> node server/index.js

[Auth Router] Loading auth routes...
[Auth Router] Change password route registered at /change-password (PUT and POST)
[Notifications Router] Loading notifications routes...
[Notifications Router] Routes loaded successfully
ğŸš€ Server running on port 3003
ğŸ“Š API available at http://localhost:3003/api
Connected to PostgreSQL database
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[API] Fetching rating history for player ID: 5
[API] Found 61 rating history records for player 5
[API] Rating stats: min=1506, max=2200, unique=61
[API] First record: { rating: 1506, recorded_at: 2025-05-10T22:04:02.619Z, match_id: 136 }
[API] Last record: { rating: 2200, recorded_at: 2025-11-06T23:04:02.659Z, match_id: null }
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[ğŸ”µ START TOURNAMENT] ==========================================
[ğŸ”µ START TOURNAMENT] Starting tournament 4...
[ğŸ”µ START TOURNAMENT] Tournament: "John Doe" (ID: 4)
[ğŸ”µ START TOURNAMENT] Current status: upcoming
[ğŸ”µ START TOURNAMENT] Format: single-elimination
[ğŸ”µ START TOURNAMENT] Participants: 8
[ğŸ”µ START TOURNAMENT] Status updated to: ongoing
[ğŸ”µ START TOURNAMENT] Existing matches: 7
[ğŸ”µ START TOURNAMENT] âŒâŒâŒ CRITICAL: Tournament has 7 matches! BLOCKING ALL GENERATION!
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[ğŸ† MATCH UPDATE] Match 285 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 6
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 6 to next round
[ğŸ† ADVANCE] Before update - Match 289:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 6
[ğŸ† ADVANCE] Winner 6 advanced to Semifinals Match 0 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 6
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Player null (ID: null)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 285
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 286 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 8
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 8 to next round
[ğŸ† ADVANCE] Before update - Match 289:
[ğŸ† ADVANCE]   - player2_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player2_id to 8
[ğŸ† ADVANCE] Winner 8 advanced to Semifinals Match 0 (player2)
[ğŸ† ADVANCE]   - After update, player2_id = 8
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Player null (ID: null)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 286
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 287 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 10
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 10 to next round
[ğŸ† ADVANCE] Before update - Match 290:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 10
[ğŸ† ADVANCE] Winner 10 advanced to Semifinals Match 1 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 10
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Lin Gaoyuan (ID: 10)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 287
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 288 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 12
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 12 to next round
[ğŸ† ADVANCE] Before update - Match 290:
[ğŸ† ADVANCE]   - player2_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player2_id to 12
[ğŸ† ADVANCE] Winner 12 advanced to Semifinals Match 1 (player2)
[ğŸ† ADVANCE]   - After update, player2_id = 12
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Lin Gaoyuan (ID: 10)',
  player2: 'Liang Jingkun (ID: 12)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 288
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 290 completion check:
[ğŸ† MATCH UPDATE]   - Round: Semifinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 10
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 10 to next round
[ğŸ† ADVANCE] Before update - Match 291:
[ğŸ† ADVANCE]   - player2_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player2_id to 10
[ğŸ† ADVANCE] Winner 10 advanced to Final Match 0 (player2)
[ğŸ† ADVANCE]   - After update, player2_id = 10
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Final after advance:
[ğŸ† ADVANCE]   Match 291: {
  player1: 'Player null (ID: null)',
  player2: 'Lin Gaoyuan (ID: 10)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 290
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 289 completion check:
[ğŸ† MATCH UPDATE]   - Round: Semifinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 6
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 6 to next round
[ğŸ† ADVANCE] Before update - Match 291:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 6
[ğŸ† ADVANCE] Winner 6 advanced to Final Match 0 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 6
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Final after advance:
[ğŸ† ADVANCE]   Match 291: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Lin Gaoyuan (ID: 10)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 289
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 285 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: 6
[ğŸ† MATCH UPDATE]   - Old winner: 6
[ğŸ† MATCH UPDATE]   - New winner: 7
[ğŸ† MATCH UPDATE]   - Winner changed: true
[ğŸ† MATCH UPDATE] âš ï¸ Winner changed from 6 to 7, calling updateNextRoundOnWinnerChange
[ğŸ† UPDATE WINNER] ========================================
[ğŸ† UPDATE WINNER] Winner changed in match 285 (Quarterfinals)
[ğŸ† UPDATE WINNER] Old winner: 6
[ğŸ† UPDATE WINNER] New winner: 7
[ğŸ”„ CASCADE RESET] ========================================
[ğŸ”„ CASCADE RESET] Starting cascade reset for match 285 in Quarterfinals
[ğŸ”„ CASCADE RESET] Searching for match 285 in Quarterfinals
[ğŸ”„ CASCADE RESET] Found 4 matches in Quarterfinals
[ğŸ”„ CASCADE RESET] Match IDs in round: [285, 286, 287, 288]
[ğŸ”„ CASCADE RESET] Match 285 is at index 0 in Quarterfinals
[ğŸ”„ CASCADE RESET] Match 285 in Quarterfinals (index 0) affects match 289 in Semifinals (index 0, slot player1)
[ğŸ”„ CASCADE RESET] Before reset - Match 289:
[ğŸ”„ CASCADE RESET]   - player1_id: 6
[ğŸ”„ CASCADE RESET]   - player2_id: 8
[ğŸ”„ CASCADE RESET]   - winner_id: 6
[ğŸ”„ CASCADE RESET]   - status: completed
[ğŸ”„ CASCADE RESET]   - Clearing slot: player1 (player1_id)
[ğŸ”„ CASCADE RESET]   - Preserving slot: player2_id = 8
[ğŸ”„ CASCADE RESET] Deleted 1 score record(s) for match 289
[ğŸ”„ CASCADE RESET] âœ… Reset match 289 in Semifinals
[ğŸ”„ CASCADE RESET] After reset - Match 289:
[ğŸ”„ CASCADE RESET]   - player1_id: null (was 6)
[ğŸ”„ CASCADE RESET]   - player2_id: 8 (was 8)
[ğŸ”„ CASCADE RESET]   - winner_id: null (was 6)
[ğŸ”„ CASCADE RESET]   - status: completed (was completed)
[ğŸ”„ CASCADE RESET] ========================================
[ğŸ”„ CASCADE RESET] Starting cascade reset for match 289 in Semifinals
[ğŸ”„ CASCADE RESET] Searching for match 289 in Semifinals
[ğŸ”„ CASCADE RESET] Found 2 matches in Semifinals
[ğŸ”„ CASCADE RESET] Match IDs in round: [289, 290]
[ğŸ”„ CASCADE RESET] Match 289 is at index 0 in Semifinals
[ğŸ”„ CASCADE RESET] Match 289 in Semifinals (index 0) affects match 291 in Final (index 0, slot player1)
[ğŸ”„ CASCADE RESET] Before reset - Match 291:
[ğŸ”„ CASCADE RESET]   - player1_id: 6
[ğŸ”„ CASCADE RESET]   - player2_id: 10
[ğŸ”„ CASCADE RESET]   - winner_id: null
[ğŸ”„ CASCADE RESET]   - status: scheduled
[ğŸ”„ CASCADE RESET]   - Clearing slot: player1 (player1_id)
[ğŸ”„ CASCADE RESET]   - Preserving slot: player2_id = 10
[ğŸ”„ CASCADE RESET] Deleted 0 score record(s) for match 291
[ğŸ”„ CASCADE RESET] âœ… Reset match 291 in Final
[ğŸ”„ CASCADE RESET] After reset - Match 291:
[ğŸ”„ CASCADE RESET]   - player1_id: null (was 6)
[ğŸ”„ CASCADE RESET]   - player2_id: 10 (was 10)
[ğŸ”„ CASCADE RESET]   - winner_id: null (was NULL)
[ğŸ”„ CASCADE RESET]   - status: scheduled (was scheduled)
[ğŸ”„ CASCADE RESET] âœ… Reset Final matches: [291]
[ğŸ”„ CASCADE RESET]   - Cleared winner_id, status, end_time, player1_id, player2_id, scores
[ğŸ† UPDATE WINNER] Found 4 matches in Quarterfinals
[ğŸ† UPDATE WINNER] Target match 289 in Semifinals:
[ğŸ† UPDATE WINNER]   - player1_id: null
[ğŸ† UPDATE WINNER]   - player2_id: 8
[ğŸ† UPDATE WINNER]   - Target slot (player1): null
[ğŸ† UPDATE WINNER]   - Other slot (player2_id): 8
[ğŸ† UPDATE WINNER]   - Expected: NULL or 6
[ğŸ† UPDATE WINNER] Clearing winner_id: true
[ğŸ† UPDATE WINNER] Current winner_id: null
[ğŸ† UPDATE WINNER] Old winner: 6, New winner: 7
[ğŸ† UPDATE WINNER] Current slot value: null
[ğŸ† UPDATE WINNER] âœ… Set 7 in Semifinals Match 0 (player1)
[ğŸ† UPDATE WINNER]   - After update, player1 = 7
[ğŸ† UPDATE WINNER]   - After update, player2_id = 8
[ğŸ† UPDATE WINNER]   - After update, winner_id = null (should be NULL)
[ğŸ† UPDATE WINNER] ğŸ“Š All matches in Semifinals after update:
[ğŸ† UPDATE WINNER]   Match 289: {
  player1: 'Fan Zhendong (ID: 7)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ† UPDATE WINNER]   Match 290: {
  player1: 'Lin Gaoyuan (ID: 10)',
  player2: 'Liang Jingkun (ID: 12)',
  winner: 'Lin Gaoyuan (ID: 10)',
  status: 'completed',
  isUpdated: ''
}
[ğŸ† UPDATE WINNER] ğŸ“Š All matches in Final (may be affected):
[ğŸ† UPDATE WINNER]   Match 291: {
  player1: 'Player null (ID: null)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled'
}
[ğŸ† UPDATE WINNER] ========================================

[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 285
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 13, 13, 13 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 1
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=4, P2 sets=4
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

Connected to PostgreSQL database
[ğŸ† MATCH UPDATE] Match 289 completion check:
[ğŸ† MATCH UPDATE]   - Round: Semifinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 7
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 7 to next round
[ğŸ† ADVANCE] Before update - Match 291:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 7
[ğŸ† ADVANCE] Winner 7 advanced to Final Match 0 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 7
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Final after advance:
[ğŸ† ADVANCE]   Match 291: {
  player1: 'Fan Zhendong (ID: 7)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 289
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

Connected to PostgreSQL database
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[API] Fetching rating history for player ID: 5
[API] Found 61 rating history records for player 5
[API] Rating stats: min=1506, max=2200, unique=61
[API] First record: { rating: 1506, recorded_at: 2025-05-10T22:04:02.619Z, match_id: 136 }
[API] Last record: { rating: 2200, recorded_at: 2025-11-06T23:04:02.659Z, match_id: null }
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
Connected to PostgreSQL database
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[API] Fetching rating history for player ID: 5
[API] Found 61 rating history records for player 5
[API] Rating stats: min=1506, max=2200, unique=61
[API] First record: { rating: 1506, recorded_at: 2025-05-10T22:04:02.619Z, match_id: 136 }
[API] Last record: { rating: 2200, recorded_at: 2025-11-06T23:04:02.659Z, match_id: null }
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[ğŸ”µ START TOURNAMENT] ==========================================
[ğŸ”µ START TOURNAMENT] Starting tournament 4...
[ğŸ”µ START TOURNAMENT] Tournament: "John Doe" (ID: 4)
[ğŸ”µ START TOURNAMENT] Current status: upcoming
[ğŸ”µ START TOURNAMENT] Format: single-elimination
[ğŸ”µ START TOURNAMENT] Participants: 8
[ğŸ”µ START TOURNAMENT] Status updated to: ongoing
[ğŸ”µ START TOURNAMENT] Existing matches: 7
[ğŸ”µ START TOURNAMENT] âŒâŒâŒ CRITICAL: Tournament has 7 matches! BLOCKING ALL GENERATION!
Filtering by organizer_id: 5
WHERE clause: WHERE t.organizer_id = $1
Query params: [ 5 ]
Final SQL query: 
      SELECT 
        t.*,
        p.username as organizer_username,
        p.full_name as organizer_name,
        COUNT(tp.player_id) as participant_count
      FROM tournaments t
      LEFT JOIN players p ON t.organizer_id = p.id
      LEFT JOIN tournament_participants tp ON t.id = tp.tournament_id
      WHERE t.organizer_id = $1
      GROUP BY t.id, p.username, p.full_name
      ORDER BY t.date DESC
      LIMIT $2 OFFSET $3
    
Final query params: [ 5, 1000, 0 ]
Tournaments found: 2
[ğŸ† MATCH UPDATE] Match 285 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 6
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 6 to next round
[ğŸ† ADVANCE] Before update - Match 289:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 6
[ğŸ† ADVANCE] Winner 6 advanced to Semifinals Match 0 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 6
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Player null (ID: null)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 285
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 286 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 8
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 8 to next round
[ğŸ† ADVANCE] Before update - Match 289:
[ğŸ† ADVANCE]   - player2_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player2_id to 8
[ğŸ† ADVANCE] Winner 8 advanced to Semifinals Match 0 (player2)
[ğŸ† ADVANCE]   - After update, player2_id = 8
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Player null (ID: null)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 286
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 287 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 10
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 10 to next round
[ğŸ† ADVANCE] Before update - Match 290:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 10
[ğŸ† ADVANCE] Winner 10 advanced to Semifinals Match 1 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 10
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Lin Gaoyuan (ID: 10)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 287
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 288 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 12
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 12 to next round
[ğŸ† ADVANCE] Before update - Match 290:
[ğŸ† ADVANCE]   - player2_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player2_id to 12
[ğŸ† ADVANCE] Winner 12 advanced to Semifinals Match 1 (player2)
[ğŸ† ADVANCE]   - After update, player2_id = 12
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Semifinals after advance:
[ğŸ† ADVANCE]   Match 289: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: ''
}
[ğŸ† ADVANCE]   Match 290: {
  player1: 'Lin Gaoyuan (ID: 10)',
  player2: 'Liang Jingkun (ID: 12)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 288
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 289 completion check:
[ğŸ† MATCH UPDATE]   - Round: Semifinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 6
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 6 to next round
[ğŸ† ADVANCE] Before update - Match 291:
[ğŸ† ADVANCE]   - player1_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player1_id to 6
[ğŸ† ADVANCE] Winner 6 advanced to Final Match 0 (player1)
[ğŸ† ADVANCE]   - After update, player1_id = 6
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Final after advance:
[ğŸ† ADVANCE]   Match 291: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 289
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 290 completion check:
[ğŸ† MATCH UPDATE]   - Round: Semifinals
[ğŸ† MATCH UPDATE]   - Was already completed: false
[ğŸ† MATCH UPDATE]   - Old winner: null
[ğŸ† MATCH UPDATE]   - New winner: 10
[ğŸ† MATCH UPDATE]   - Winner changed: false
[ğŸ† MATCH UPDATE] New completion, advancing winner 10 to next round
[ğŸ† ADVANCE] Before update - Match 291:
[ğŸ† ADVANCE]   - player2_id: null
[ğŸ† ADVANCE]   - winner_id: NULL
[ğŸ† ADVANCE]   - Setting player2_id to 10
[ğŸ† ADVANCE] Winner 10 advanced to Final Match 0 (player2)
[ğŸ† ADVANCE]   - After update, player2_id = 10
[ğŸ† ADVANCE]   - After update, winner_id = null (should be NULL)
[ğŸ† ADVANCE] ğŸ“Š All matches in Final after advance:
[ğŸ† ADVANCE]   Match 291: {
  player1: 'Ma Long (ID: 6)',
  player2: 'Lin Gaoyuan (ID: 10)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 290
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 0, 0 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 0
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=3, P2 sets=3
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

[ğŸ† MATCH UPDATE] Match 285 completion check:
[ğŸ† MATCH UPDATE]   - Round: Quarterfinals
[ğŸ† MATCH UPDATE]   - Was already completed: 6
[ğŸ† MATCH UPDATE]   - Old winner: 6
[ğŸ† MATCH UPDATE]   - New winner: 7
[ğŸ† MATCH UPDATE]   - Winner changed: true
[ğŸ† MATCH UPDATE] âš ï¸ Winner changed from 6 to 7, calling updateNextRoundOnWinnerChange
[ğŸ† UPDATE WINNER] ========================================
[ğŸ† UPDATE WINNER] Winner changed in match 285 (Quarterfinals)
[ğŸ† UPDATE WINNER] Old winner: 6
[ğŸ† UPDATE WINNER] New winner: 7
[ğŸ”„ CASCADE RESET] ========================================
[ğŸ”„ CASCADE RESET] Starting cascade reset for match 285 in Quarterfinals
[ğŸ”„ CASCADE RESET] Searching for match 285 in Quarterfinals
[ğŸ”„ CASCADE RESET] Found 4 matches in Quarterfinals
[ğŸ”„ CASCADE RESET] Match IDs in round: [285, 286, 287, 288]
[ğŸ”„ CASCADE RESET] Match 285 is at index 0 in Quarterfinals
[ğŸ”„ CASCADE RESET] Match 285 in Quarterfinals (index 0) affects match 289 in Semifinals (index 0, slot player1)
[ğŸ”„ CASCADE RESET] Before reset - Match 289:
[ğŸ”„ CASCADE RESET]   - player1_id: 6
[ğŸ”„ CASCADE RESET]   - player2_id: 8
[ğŸ”„ CASCADE RESET]   - winner_id: 6
[ğŸ”„ CASCADE RESET]   - status: completed
[ğŸ”„ CASCADE RESET]   - Clearing slot: player1 (player1_id)
[ğŸ”„ CASCADE RESET]   - Preserving slot: player2_id = 8
[ğŸ”„ CASCADE RESET] Deleted 1 score record(s) for match 289
[ğŸ”„ CASCADE RESET] âœ… Reset match 289 in Semifinals
[ğŸ”„ CASCADE RESET] After reset - Match 289:
[ğŸ”„ CASCADE RESET]   - player1_id: null (was 6)
[ğŸ”„ CASCADE RESET]   - player2_id: 8 (was 8)
[ğŸ”„ CASCADE RESET]   - winner_id: null (was 6)
[ğŸ”„ CASCADE RESET]   - status: completed (was completed)
[ğŸ”„ CASCADE RESET] ========================================
[ğŸ”„ CASCADE RESET] Starting cascade reset for match 289 in Semifinals
[ğŸ”„ CASCADE RESET] Searching for match 289 in Semifinals
[ğŸ”„ CASCADE RESET] Found 2 matches in Semifinals
[ğŸ”„ CASCADE RESET] Match IDs in round: [289, 290]
[ğŸ”„ CASCADE RESET] Match 289 is at index 0 in Semifinals
[ğŸ”„ CASCADE RESET] Match 289 in Semifinals (index 0) affects match 291 in Final (index 0, slot player1)
[ğŸ”„ CASCADE RESET] Before reset - Match 291:
[ğŸ”„ CASCADE RESET]   - player1_id: 6
[ğŸ”„ CASCADE RESET]   - player2_id: 10
[ğŸ”„ CASCADE RESET]   - winner_id: null
[ğŸ”„ CASCADE RESET]   - status: scheduled
[ğŸ”„ CASCADE RESET]   - Clearing slot: player1 (player1_id)
[ğŸ”„ CASCADE RESET]   - Preserving slot: player2_id = 10
[ğŸ”„ CASCADE RESET] Deleted 0 score record(s) for match 291
[ğŸ”„ CASCADE RESET] âœ… Reset match 291 in Final
[ğŸ”„ CASCADE RESET] After reset - Match 291:
[ğŸ”„ CASCADE RESET]   - player1_id: null (was 6)
[ğŸ”„ CASCADE RESET]   - player2_id: 10 (was 10)
[ğŸ”„ CASCADE RESET]   - winner_id: null (was NULL)
[ğŸ”„ CASCADE RESET]   - status: scheduled (was scheduled)
[ğŸ”„ CASCADE RESET] âœ… Reset Final matches: [291]
[ğŸ”„ CASCADE RESET]   - Cleared winner_id, status, end_time, player1_id, player2_id, scores
[ğŸ† UPDATE WINNER] Found 4 matches in Quarterfinals
[ğŸ† UPDATE WINNER] Target match 289 in Semifinals:
[ğŸ† UPDATE WINNER]   - player1_id: null
[ğŸ† UPDATE WINNER]   - player2_id: 8
[ğŸ† UPDATE WINNER]   - Target slot (player1): null
[ğŸ† UPDATE WINNER]   - Other slot (player2_id): 8
[ğŸ† UPDATE WINNER]   - Expected: NULL or 6
[ğŸ† UPDATE WINNER] Clearing winner_id: true
[ğŸ† UPDATE WINNER] Current winner_id: null
[ğŸ† UPDATE WINNER] Old winner: 6, New winner: 7
[ğŸ† UPDATE WINNER] Current slot value: null
[ğŸ† UPDATE WINNER] âœ… Set 7 in Semifinals Match 0 (player1)
[ğŸ† UPDATE WINNER]   - After update, player1 = 7
[ğŸ† UPDATE WINNER]   - After update, player2_id = 8
[ğŸ† UPDATE WINNER]   - After update, winner_id = null (should be NULL)
[ğŸ† UPDATE WINNER] ğŸ“Š All matches in Semifinals after update:
[ğŸ† UPDATE WINNER]   Match 289: {
  player1: 'Fan Zhendong (ID: 7)',
  player2: 'Tomokazu Harimoto (ID: 8)',
  winner: 'None (ID: NULL)',
  status: 'scheduled',
  isUpdated: 'âœ… UPDATED'
}
[ğŸ† UPDATE WINNER]   Match 290: {
  player1: 'Lin Gaoyuan (ID: 10)',
  player2: 'Liang Jingkun (ID: 12)',
  winner: 'Lin Gaoyuan (ID: 10)',
  status: 'completed',
  isUpdated: ''
}
[ğŸ† UPDATE WINNER] ğŸ“Š All matches in Final (may be affected):
[ğŸ† UPDATE WINNER]   Match 291: {
  player1: 'Player null (ID: null)',
  player2: 'Player null (ID: null)',
  winner: 'None (ID: NULL)',
  status: 'scheduled'
}
[ğŸ† UPDATE WINNER] ========================================

[ğŸ“Š UPDATE SCORES] ========================================
[ğŸ“Š UPDATE SCORES] Match ID: 285
[ğŸ“Š UPDATE SCORES] Player1 scores: [ 11, 11, 11, 11 ]
[ğŸ“Š UPDATE SCORES] Player2 scores: [ 0, 13, 13, 13 ]
[ğŸ“Š UPDATE SCORES] âœ… Match found: Tournament 4
[ğŸ“Š UPDATE SCORES] Existing scores records: 1
[ğŸ“Š UPDATE SCORES] âœ… Scores updated successfully
[ğŸ“Š UPDATE SCORES] Calculating winner: P1 sets=4, P2 sets=4
[ğŸ“Š UPDATE SCORES] No winner determined (equal sets)
[ğŸ“Š UPDATE SCORES] ========================================

